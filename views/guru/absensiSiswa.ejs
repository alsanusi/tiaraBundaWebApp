<!-- Include Header -->
<%- include ../assets/back-end/layout/header.ejs %>

<body class="">
    <nav class="navbar navbar-vertical fixed-left navbar-expand-md navbar-light bg-white" id="sidenav-main">
        <div class="container-fluid">
            <!-- Toggler -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#sidenav-collapse-main"
                aria-controls="sidenav-main" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Brand -->
            <a class="navbar-brand pt-0" href="./dashboard">
                <img src="/assets/back-end/assets/img/brand/blue.png" class="navbar-brand-img" alt="...">
            </a>
            <!-- User -->
            <ul class="nav align-items-center d-md-none">
                <li class="nav-item dropdown">
                    <a class="nav-link nav-link-icon" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                        <i class="ni ni-bell-55"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right"
                        aria-labelledby="navbar-default_dropdown_1">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                        <div class="media align-items-center">
                            <span class="avatar avatar-sm rounded-circle">
                                <img alt="Image placeholder"
                                    src="../assets/back-end/assets/img/theme/team-1-800x800.jpg">
                            </span>
                        </div>
                    </a>
                    <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
                        <div class=" dropdown-header noti-title">
                            <h6 class="text-overflow m-0">Selamat Datang!</h6>
                        </div>
                        <div class="dropdown-divider"></div>
                        <form action="/panel/logout" method="POST">
                            <input type="submit" class="btn btn-primary btn-pill"
                                style="width: 100%; background: none; border: none; box-shadow: none; color: red;"
                                value="Logout">
                        </form>
                    </div>
                </li>
            </ul>
            <!-- Collapse -->
            <div class="collapse navbar-collapse" id="sidenav-collapse-main">
                <!-- Collapse header -->
                <div class="navbar-collapse-header d-md-none">
                    <div class="row">
                        <div class="col-6 collapse-brand">
                            <a href="./dashboard">
                                <img src="../assets/back-end/assets/img/brand/blue.png">
                            </a>
                        </div>
                        <div class="col-6 collapse-close">
                            <button type="button" class="navbar-toggler" data-toggle="collapse"
                                data-target="#sidenav-collapse-main" aria-controls="sidenav-main" aria-expanded="false"
                                aria-label="Toggle sidenav">
                                <span></span>
                                <span></span>
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Form -->
                <form class="mt-4 mb-3 d-md-none">
                    <div class="input-group input-group-rounded input-group-merge">
                        <input type="search" class="form-control form-control-rounded form-control-prepended"
                            placeholder="Search" aria-label="Search">
                        <div class="input-group-prepend">
                            <div class="input-group-text">
                                <span class="fa fa-search"></span>
                            </div>
                        </div>
                    </div>
                </form>
                <!-- Navigation -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class=" nav-link " href="./dashboard"> <i class="ni ni-tv-2 text-primary"></i>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="profil">
                            <i class="ni ni-single-02 text-red"></i> Profil Guru
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="kelolaJadwal">
                            <i class="ni ni-single-copy-04 text-black"></i> Jadwal Pelajaran
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="absensiSiswa">
                            <i class="ni ni-single-copy-04 text-purple"></i> Absensi Siswa
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="kelolaAbsensi">
                            <i class="ni ni-single-copy-04 text-yellow"></i> Kelola Absensi Siswa
                        </a>
                    </li>
                </ul>
                </ul>
                <!-- Divider -->
                <hr class="my-3">
            </div>
        </div>
    </nav>
    <div class="main-content">
        <!-- Navbar -->
        <nav class="navbar navbar-top navbar-expand-md navbar-dark" id="navbar-main">
            <div class="container-fluid">
                <!-- Form -->
                <form class="navbar-search navbar-search-dark form-inline mr-3 d-none d-md-flex ml-lg-auto">
                </form>
                <!-- User -->
                <ul class="navbar-nav align-items-center d-none d-md-flex">
                    <li class="nav-item dropdown">
                        <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <div class="media align-items-center">
                                <span class="avatar avatar-sm rounded-circle">
                                    <img alt="Image placeholder"
                                        src="../assets/back-end/assets/img/theme/team-4-800x800.jpg">
                                </span>
                                <div class="media-body ml-2 d-none d-lg-block">
                                    <span class="mb-0 text-sm  font-weight-bold">Admin</span>
                                </div>
                            </div>
                        </a>
                        <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
                            <div class=" dropdown-header noti-title">
                                <h6 class="text-overflow m-0">Selamat Datang!</h6>
                            </div>
                            <div class="dropdown-divider"></div>
                            <form action="/panel/logout" method="POST">
                                <input type="submit" class="btn btn-primary btn-pill"
                                    style="width: 100%; background: none; border: none; box-shadow: none; color: red;"
                                    value="Logout">
                            </form>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- End Navbar -->
        <!-- Header -->
        <div class="header bg-gradient-primary pb-8 pt-5 pt-md-8">
            <div class="container-fluid">
                <div class="header-body">
                    <!-- Card stats -->
                </div>
            </div>
        </div>
        <!-- Page content -->
        <div class="container-fluid mt--7">
            <!-- <form name="cariDataSiswa" action="/guru/absensiSiswa" method="POST"> -->
            <!--  -->
            <div class="row">
                <div class="col">
                    <div class="card shadow">
                        <form name="cariDataSiswa" action="/guru/pilihanMapel" method="POST">
                            <div class="card-header bg-white border-0">
                                <div class="row align-items-center" style="margin-bottom: 20px;">
                                    <div class="col-12">
                                        <h3 class="mb-0">Masukkan Tanggal</h3>
                                    </div>
                                </div>
                                <div class="row align-items-center">
                                    <div class="col-5">
                                        <div class="form-group">
                                            <label class="form-control-label" for="input-last-name">Tanggal
                                                Pelajaran</label>
                                            <input type="date" id="tanggalPelajaran" name="tanggalPelajaran"
                                                value="<%= pilihanTanggal %>"
                                                class="form-control form-control-alternative" disabled>
                                        </div>
                                    </div>
                                    <div class="col-lg-5">
                                        <div class="form-group">
                                            <label class="form-control-label" for="input-last-name">Mata
                                                Pelajaran</label>
                                            <select class="form-control" name="mapel">
                                                <optgroup label="SELECTED">
                                                    <option value="<%= mapelGuru %>"><%= mapelGuru %></option>
                                                </optgroup>
                                                <optgroup label="OPSI">
                                                    <option value="PKN">PKN</option>
                                                    <option value="Matematika">Matematika</option>
                                                    <option value="IPS">IPS</option>
                                                    <option value="Agama">Agama</option>
                                                    <option value="IPA">IPA</option>
                                                    <option value="Bahasa Indonesia">Bahasa Indonesia</option>
                                                    <option value="Bahasa Inggris">Bahasa Inggris</option>
                                                    <option value="Penjaskes">Penjaskes</option>
                                                    <option value="Seni Budaya">Seni Budaya</option>
                                                </optgroup>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg-2 text-center">
                                        <button type="submit" class="btn btn-primary notika-btn-primary">Mulai
                                            Absensi</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!--  -->
            <!-- Table -->
            <div class="row" style="margin-top: 20px">
                <div class="col">
                    <div class="card shadow">
                        <div class="card-header border-0">
                            <h3 class="mb-0">Absensi Siswa</h3>
                            <!-- Error and Success Message -->
                            <% if(messages.error){ %>
                            <br />
                            <h4 style="color:#d82436">Siswa gagal diabsen!</h4>
                            <p><%- messages.error %></p>
                            <!-- </br> -->
                            <%} else if(messages.success){ %>
                            <br />
                            <h4 style="color:#5cb85c">Siswa berhasil diabsen!</h4>
                            <% } %>
                        </div>
                        <div class="table-responsive">
                            <table class="table align-items-center table-flush">
                                <thead class="thead-light">
                                    <tr>
                                        <th scope="col">No</th>
                                        <th scope="col">Id Siswa</th>
                                        <th scope="col">Nama Siswa</th>
                                        <th scope="col">Status Kehadiran</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data -->
                                    <% if(listSiswa) { %>
                                    <% listSiswa.forEach((data, i) => { %>
                                    <tr>
                                        <td>
                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <%= i + 1 %>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <input class="form-control form-control-alternative"
                                                        placeholder="Id Siswa" name="idSiswa"
                                                        value="<%= data.idSiswa %>" type="text" readonly>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <input class="form-control form-control-alternative"
                                                        placeholder="Nama Siswa" name="namaSiswa"
                                                        value="<%= data.namaSiswa %>" type="text" readonly>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <form name="cariDataSiswa" action="/guru/absensiSiswa" method="POST">
                                                <div style="display: none">
                                                    <div class="col-lg-12">
                                                        <div class="form-group">
                                                            <input class="form-control form-control-alternative"
                                                                placeholder="Id Siswa" name="idSiswa"
                                                                value="<%= data.idSiswa %>" type="text" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="form-group">
                                                            <input class="form-control form-control-alternative"
                                                                placeholder="Nama Siswa" name="namaSiswa"
                                                                value="<%= data.namaSiswa %>" type="text" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style="display: flex;">
                                                    <div class="col-lg-7">
                                                        <div class="form-group">
                                                            <select class="form-control" name="status">
                                                                <option value="Hadir">Hadir</option>
                                                                <option value="Sakit">Sakit</option>
                                                                <option value="Izin">Izin</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-5 text-right">
                                                        <button type="submit"
                                                            class="btn btn-primary notika-btn-primary">Absen</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </td>
                                    </tr>
                                    <% }) %>
                                    <% } %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- </form> -->
            <!-- Footer -->
            <footer class="footer">
                <div class="row align-items-center justify-content-xl-between">
                    <div class="col-xl-6">
                        <div class="copyright text-center text-xl-left text-muted">
                            &copy; 2020 <a class="font-weight-bold ml-1">Tiara Bunda</a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Include Footer -->
    <%- include ../assets/back-end/layout/footer.ejs %>